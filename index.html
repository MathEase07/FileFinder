<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>File Storage Tracker</title>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: "Poppins", sans-serif;
        background: #0f1419;
        color: #e0e6f2;
        min-height: 100vh;
        display: flex;
    }

    /* SIDEBAR */
    .sidebar {
        width: 380px;
        background: #1a1f2e;
        padding: 30px 25px;
        border-right: 1px solid #2a3547;
        overflow-y: auto;
        position: fixed;
        height: 100vh;
        left: 0;
        top: 0;
    }

    .logo {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 35px;
        color: white;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .form-section {
        display: none;
    }

    .form-section.active {
        display: block;
    }

    .form-section h3 {
        font-size: 14px;
        font-weight: 600;
        color: #60a5fa;
        margin-bottom: 18px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .form-group {
        margin-bottom: 16px;
    }

    .form-group label {
        display: block;
        font-size: 12px;
        font-weight: 500;
        color: #a8b5c8;
        margin-bottom: 6px;
        text-transform: uppercase;
        letter-spacing: 0.3px;
    }

    .form-group input,
    .form-group textarea {
        width: 100%;
        padding: 10px 12px;
        background: #0f1419;
        border: 1px solid #2a3547;
        border-radius: 6px;
        color: #e0e6f2;
        font-size: 13px;
        font-family: "Poppins", sans-serif;
        outline: none;
        transition: 0.3s;
    }

    .form-group input:focus,
    .form-group textarea:focus {
        border-color: #60a5fa;
        box-shadow: 0 0 12px rgba(96, 165, 250, 0.2);
    }

    .form-group textarea {
        resize: vertical;
        min-height: 100px;
    }

    .button-group {
        display: flex;
        gap: 10px;
        margin-top: 20px;
    }

    .button-group button {
        flex: 1;
        padding: 10px 16px;
        border: none;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: 0.3s;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .button-group button.primary {
        background: #60a5fa;
        color: #0f1419;
    }

    .button-group button.primary:hover {
        background: #93c5fd;
    }

    .button-group button.secondary {
        background: #2a3547;
        color: #a8b5c8;
    }

    .button-group button.secondary:hover {
        background: #3a4557;
    }

    .status-message {
        padding: 10px 12px;
        border-radius: 6px;
        font-size: 12px;
        margin-bottom: 15px;
        animation: slideIn 0.3s ease-out;
    }

    .status-message.success {
        background: #10b981;
        color: white;
    }

    .status-message.error {
        background: #ef4444;
        color: white;
    }

    /* MAIN CONTENT */
    .main-content {
        flex: 1;
        margin-left: 380px;
        padding: 30px 40px;
        background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%);
    }

    .header-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
    }

    .header-top h2 {
        font-size: 22px;
        font-weight: 700;
        color: white;
    }

    .search-box {
        width: 300px;
        padding: 10px 16px;
        background: #1a1f2e;
        border: 1px solid #2a3547;
        border-radius: 8px;
        color: #e0e6f2;
        font-size: 13px;
        font-family: "Poppins", sans-serif;
        outline: none;
        transition: 0.3s;
    }

    .search-box:focus {
        border-color: #60a5fa;
        box-shadow: 0 0 15px rgba(96, 165, 250, 0.3);
    }

    .search-box::placeholder {
        color: #5a6672;
    }

    #results {
        display: flex;
        flex-direction: column;
        gap: 0;
    }

    .year-section {
        margin-bottom: 25px;
    }

    .year-header {
        font-size: 15px;
        font-weight: 700;
        color: #60a5fa;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 2px solid #2a3547;
    }

    .month-section {
        margin-bottom: 12px;
    }

    .month-header {
        font-size: 11px;
        font-weight: 600;
        color: #7a8899;
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .file-card {
        background: transparent;
        border: none;
        border-bottom: 1px solid #2a3547;
        padding: 12px 0;
        transition: 0.2s;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 15px;
    }

    .file-card:hover {
        background: rgba(96, 165, 250, 0.05);
        padding: 12px 10px;
        border-radius: 4px;
    }

    .file-info-left {
        flex: 1;
        min-width: 0;
    }

    .file-title {
        font-size: 13px;
        font-weight: 600;
        color: white;
        margin-bottom: 4px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .file-storage {
        font-size: 16px;
        color: #a8b5c8;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .file-storage strong {
        color: #60a5fa;
    }

    .file-detail {
        font-size: 13px;
        color: #a8b5c8;
        margin-bottom: 4px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .file-detail .label {
        font-weight: 600;
        color: #60a5fa;
        margin-right: 6px;
    }

    .file-actions {
        display: flex;
        gap: 6px;
        flex-shrink: 0;
    }

    .file-actions button {
        padding: 6px 12px;
        font-size: 11px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: 0.2s;
        font-weight: 600;
        white-space: nowrap;
    }

    .file-actions button.edit {
        background: #10b981;
        color: white;
    }

    .file-actions button.edit:hover {
        background: #059669;
    }

    .file-actions button.delete {
        background: #ef4444;
        color: white;
    }

    .file-actions button.delete:hover {
        background: #dc2626;
    }

    .empty-state {
        text-align: center;
        padding: 60px 30px;
        color: #5a6672;
    }

    .empty-state-icon {
        font-size: 48px;
        margin-bottom: 20px;
        opacity: 0.6;
    }

    .empty-state p {
        font-size: 14px;
    }

    .nav-buttons {
        display: flex;
        gap: 10px;
        margin-top: 25px;
        padding-top: 20px;
        border-top: 1px solid #2a3547;
    }

    .nav-buttons button {
        flex: 1;
        padding: 10px 14px;
        border: 1px solid #2a3547;
        background: transparent;
        color: #a8b5c8;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: 0.3s;
        text-transform: uppercase;
        letter-spacing: 0.3px;
    }

    .nav-buttons button.active {
        background: #60a5fa;
        color: #0f1419;
        border-color: #60a5fa;
    }

    .nav-buttons button:hover:not(.active) {
        border-color: #60a5fa;
        color: #60a5fa;
    }

    @keyframes slideIn {
        from {
            transform: translateY(-10px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    /* SCROLLBAR */
    ::-webkit-scrollbar {
        width: 6px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: #2a3547;
        border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #3a4557;
    }

    /* RESPONSIVE */
    @media (max-width: 1024px) {
        .sidebar {
            width: 320px;
        }

        .main-content {
            margin-left: 320px;
            padding: 20px 30px;
        }

        .search-box {
            width: 200px;
        }
    }

    @media (max-width: 768px) {
        body {
            flex-direction: column;
        }

        .sidebar {
            width: 100%;
            height: auto;
            position: relative;
            border-right: none;
            border-bottom: 1px solid #2a3547;
            padding: 20px;
        }

        .main-content {
            margin-left: 0;
            padding: 20px;
        }

        .header-top {
            flex-direction: column;
            gap: 15px;
            align-items: flex-start;
        }

        .search-box {
            width: 100%;
        }

        .nav-buttons {
            margin-top: 15px;
            padding-top: 15px;
        }

        .file-actions {
            flex-direction: column;
        }

        .file-card {
            flex-direction: column;
            align-items: flex-start;
        }
    }
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <div class="logo">Sample pa lang. Nyak Nyak</div>

    <!-- ADD FILE FORM -->
    <div id="addForm" class="form-section active">
        <h3>Add New File</h3>
        <div id="addStatus"></div>

        <div class="form-group">
            <label>Title</label>
            <input type="text" id="title" placeholder="Enter file title...">
        </div>

        <div class="form-group">
            <label>Storage Location</label>
            <input type="text" id="storage" placeholder="Cabinet A, Shelf 1...">
        </div>

        <div class="form-group">
            <label>Other Information</label>
            <textarea id="info" placeholder="Add any details..."></textarea>
        </div>

        <div class="button-group">
            <button class="primary" onclick="addFile()">‚úì Add</button>
            <button class="secondary" onclick="clearForm()">Clear</button>
        </div>

        <div class="button-group" style="margin-top: 15px; flex-direction: column; gap: 8px;">
            <button class="secondary" onclick="exportFiles()" style="font-size: 12px;">üì• Export Files</button>
            <button class="secondary" onclick="importFiles()" style="font-size: 12px;">üì§ Import Files</button>
        </div>
    </div>

    <!-- VIEW FILES FORM -->
    <div id="viewForm" class="form-section"></div>

    <!-- NAV BUTTONS -->
    
</div>

<!-- MAIN CONTENT -->
<div class="main-content">
    <div class="header-top">
        <h2>All Files</h2>
        <input type="text" class="search-box" id="searchBar" placeholder="üîç Search files...">
    </div>
    <div id="statusMessage"></div>
    <div id="results"></div>
</div>

<script>
    // Simple localStorage-based File Storage with Manual Sync
    const STORAGE_KEY = "fileStorageTrackerData";
    
    // Load files from localStorage
    async function loadFiles() {
        const data = localStorage.getItem(STORAGE_KEY);
        return data ? JSON.parse(data) : [];
    }

    // Save files to localStorage
    async function saveFiles(files) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(files));
        console.log("‚úì Files saved");
    }

    // Export files as JSON for sharing
    async function exportFiles() {
        const files = await loadFiles();
        const dataStr = JSON.stringify(files, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = 'file-storage-backup.json';
        link.click();
        URL.revokeObjectURL(url);
        alert("‚úì Files exported! You can share this file or email it.");
    }

    // Import files from JSON
    async function importFiles() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        input.onchange = async (e) => {
            const file = e.target.files[0];
            const text = await file.text();
            const importedFiles = JSON.parse(text);
            
            // Merge with existing files (avoid duplicates by ID)
            const existing = await loadFiles();
            const existingIds = new Set(existing.map(f => f.id));
            const newFiles = importedFiles.filter(f => !existingIds.has(f.id));
            
            const merged = [...existing, ...newFiles];
            await saveFiles(merged);
            
            alert(`‚úì Imported ${newFiles.length} new files!`);
            const searchBar = document.getElementById("searchBar");
            if (searchBar) {
                displayAllFiles(searchBar.value);
            }
        };
        input.click();
    }


    // Switch forms
    function switchForm(form) {
        document.querySelectorAll(".form-section").forEach(el => el.classList.remove("active"));
        document.querySelectorAll(".nav-buttons button").forEach(el => el.classList.remove("active"));

        if (form === "add") {
            document.getElementById("addForm").classList.add("active");
        }

        // Mark the clicked button as active
        const buttons = document.querySelectorAll(".nav-buttons button");
        buttons.forEach((btn, idx) => {
            if ((form === "add" && idx === 0) || (form === "view" && idx === 1)) {
                btn.classList.add("active");
            }
        });

        if (form === "view") {
            displayAllFiles();
        }
    }

    // Show status
    function showStatus(message, type = "success", containerId = "addStatus") {
        const statusDiv = document.getElementById(containerId);
        statusDiv.className = `status-message ${type}`;
        statusDiv.textContent = message;

        if (type === "success") {
            setTimeout(() => {
                statusDiv.innerHTML = "";
            }, 2500);
        }
    }

    // Add file
    async function addFile() {
        const title = document.getElementById("title").value.trim();
        const storage = document.getElementById("storage").value.trim();
        const info = document.getElementById("info").value.trim();

        if (!title || !storage) {
            showStatus("‚ö†Ô∏è Title and Location required!", "error");
            return;
        }

        const files = await loadFiles();
        files.push({
            id: Date.now(),
            title,
            storage,
            info,
            createdDate: new Date().toISOString()
        });

        await saveFiles(files);
        showStatus("‚úì File added!", "success");
        clearForm();
    }

    // Clear form
    function clearForm() {
        document.getElementById("title").value = "";
        document.getElementById("storage").value = "";
        document.getElementById("info").value = "";
    }

    // Get year
    function getYear(dateString) {
        return new Date(dateString).getFullYear();
    }

    // Get month/year
    function getMonthYear(dateString) {
        const date = new Date(dateString);
        const months = ["January", "February", "March", "April", "May", "June",
                       "July", "August", "September", "October", "November", "December"];
        return `${months[date.getMonth()]} ${date.getFullYear()}`;
    }

    // Display all files
    async function displayAllFiles(searchQuery = "") {
        const files = await loadFiles();
        const resultsDiv = document.getElementById("results");
        const statusDiv = document.getElementById("statusMessage");

        // If no search query, show empty state message
        if (!searchQuery) {
            resultsDiv.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <p>Searched Information will show here.</p>
                </div>
            `;
            statusDiv.innerHTML = "";
            return;
        }

        let filteredFiles = files;
        const query = searchQuery.toLowerCase();
        filteredFiles = files.filter(f =>
            f.title.toLowerCase().includes(query) ||
            f.storage.toLowerCase().includes(query) ||
            f.info.toLowerCase().includes(query)
        );

        if (filteredFiles.length === 0) {
            resultsDiv.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üì≠</div>
                    <p>No files found</p>
                </div>
            `;
            statusDiv.innerHTML = "";
            return;
        }

        filteredFiles.sort((a, b) => new Date(b.createdDate) - new Date(a.createdDate));

        const groupedByYear = {};
        filteredFiles.forEach(file => {
            const year = getYear(file.createdDate);
            const monthYear = getMonthYear(file.createdDate);

            if (!groupedByYear[year]) {
                groupedByYear[year] = {};
            }
            if (!groupedByYear[year][monthYear]) {
                groupedByYear[year][monthYear] = [];
            }
            groupedByYear[year][monthYear].push(file);
        });

        let html = "";
        const years = Object.keys(groupedByYear).sort((a, b) => b - a);

        years.forEach(year => {
            html += `<div class="year-section">
                        <div class="year-header"></div>`;

            const monthsInYear = Object.keys(groupedByYear[year]);
            monthsInYear.forEach(monthYear => {
                html += `<div class="month-section">
                            <div class="month-header"></div>`;

                groupedByYear[year][monthYear].forEach(file => {
                    html += `
                        <div class="file-card">
                            <div class="file-info-left">
                                <div class="file-detail"><span class="label">Title:</span> ${escapeHtml(file.title)}</div>
                                <div class="file-detail"><span class="label">Location:</span> ${escapeHtml(file.storage)}</div>
                                ${file.info ? `<div class="file-detail"><span class="label">Other Info:</span> ${escapeHtml(file.info)}</div>` : ""}
                            </div>
                            <div class="file-actions">
                                <button class="edit" onclick="editFile(${file.id})">Edit</button>
                                <button class="delete" onclick="deleteFile(${file.id})">Delete</button>
                            </div>
                        </div>
                    `;
                });

                html += `</div>`;
            });

            html += `</div>`;
        });

        resultsDiv.innerHTML = html;
        statusDiv.innerHTML = searchQuery ? `<div class="status-message success">Found ${filteredFiles.length} file(s)</div>` : "";
    }

    // Edit file
    async function editFile(id) {
        const files = await loadFiles();
        const fileIndex = files.findIndex(f => f.id === id);

        if (fileIndex === -1) return;

        const file = files[fileIndex];
        const newTitle = prompt("Edit Title:", file.title);

        if (newTitle === null) return;
        if (!newTitle.trim()) {
            alert("Title cannot be empty!");
            return;
        }

        const newStorage = prompt("Edit Location:", file.storage);
        if (newStorage === null) return;
        if (!newStorage.trim()) {
            alert("Location cannot be empty!");
            return;
        }

        const newInfo = prompt("Edit Information:", file.info);
        if (newInfo === null) return;

        files[fileIndex] = {
            ...file,
            title: newTitle.trim(),
            storage: newStorage.trim(),
            info: newInfo.trim(),
            updatedDate: new Date().toISOString()
        };

        await saveFiles(files);
        showStatus("‚úì Updated!", "success", "statusMessage");
        await displayAllFiles(document.getElementById("searchBar").value);
    }

    // Delete file
    async function deleteFile(id) {
        if (!confirm("Delete this file?")) return;

        let files = await loadFiles();
        files = files.filter(f => f.id !== id);
        await saveFiles(files);

        showStatus("‚úì Deleted!", "success", "statusMessage");
        await displayAllFiles(document.getElementById("searchBar").value);
    }

    // Search
    function searchFiles() {
        const query = document.getElementById("searchBar").value;
        displayAllFiles(query);
    }

    // Escape HTML
    function escapeHtml(text) {
        const map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
    }

    // Event listeners
    document.addEventListener("DOMContentLoaded", function() {
        const searchBar = document.getElementById("searchBar");
        if (searchBar) {
            searchBar.addEventListener("keyup", searchFiles);
        }
        // Show empty state on startup
        displayAllFiles();
    });
</script>

</body>
</html>

